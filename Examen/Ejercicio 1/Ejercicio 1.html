<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Ejercicio 1</title>

    <!-- Estilos en un fichero externo que no tendrás que modificar -->
    <link rel="stylesheet" type="text/css" href="estilos1.css" />

    <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", () => {
            // Constantes con la rotación y desplazamiento que hay que llevar a cabo
            const DESP = 70;
            const ROT = 360;

            //Para obtener el número de milisegundos en los que se ejecuta una animación
            function getMilisegundos() {
                return document.querySelector("input[name='segundos']").value * 1000;
            }

            //Esta función se encarga de desplazar la imagen			
            function desplazar() {

                var milisegundos = getMilisegundos();

                if (milisegundos < 0 || milisegundos == '') {
                    alert("Debe introducir un número de segundos mayor que cero");
                } else {
                    var element = document.getElementById('pelota1');

                    var position = 0;
                    var positionFinal = 70;

                    var rotation = 0;
                    var rotationFinal = 360;

                    var time = milisegundos;
                    var currentTime = 0;

                    var inter = setInterval(() => {

                        element.style.left = position + "%";
                        element.style.transform = "rotate(" + rotation + "deg)";

                        position = positionFinal * (currentTime / time);
                        rotation = rotationFinal * (currentTime / time);

                        console.log(currentTime);
                        if (currentTime >= time) {
                            clearInterval(inter);
                        }

                        currentTime += 50;
                    }, 50);
                }

            }

            //Por defecto se activa la animación						
            document.getElementById("pulsador").addEventListener("click", desplazar);

        });
    </script>
</head>

<body>
    <img id="pelota1" class="pelota" src="pelota1.png" />
    <div id="contenedor">
        <div id="pulsador" class="activador"><span>A rodar</span></div>
        <input type="text" name="segundos" size="5" class="activador"></input>
    </div>

</body>

</html>